{"ast":null,"code":"import _asyncToGenerator from \"F:/Research-Flutter-ionic/ionic_test_app/testapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { WebPlugin } from '@capacitor/core';\nexport class CameraPreviewWeb extends WebPlugin {\n  constructor() {\n    super({\n      name: 'CameraPreview',\n      platforms: ['web']\n    });\n  }\n  start(options) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      return new Promise( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (resolve, reject) {\n          yield navigator.mediaDevices.getUserMedia({\n            audio: !options.disableAudio,\n            video: true\n          }).then(stream => {\n            // Stop any existing stream so we can request media with different constraints based on user input\n            stream.getTracks().forEach(track => track.stop());\n          }).catch(error => {\n            reject(error);\n          });\n          const video = document.getElementById('video');\n          const parent = document.getElementById(options.parent);\n          if (!video) {\n            const videoElement = document.createElement('video');\n            videoElement.id = 'video';\n            videoElement.setAttribute('class', options.className || '');\n            // Don't flip video feed if camera is rear facing\n            if (options.position !== 'rear') {\n              videoElement.setAttribute('style', '-webkit-transform: scaleX(-1); transform: scaleX(-1);');\n            }\n            const userAgent = navigator.userAgent.toLowerCase();\n            const isSafari = userAgent.includes('safari') && !userAgent.includes('chrome');\n            // Safari on iOS needs to have the autoplay, muted and playsinline attributes set for video.play() to be successful\n            // Without these attributes videoElement.play() will throw a NotAllowedError\n            // https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari\n            if (isSafari) {\n              videoElement.setAttribute('autoplay', 'true');\n              videoElement.setAttribute('muted', 'true');\n              videoElement.setAttribute('playsinline', 'true');\n            }\n            parent.appendChild(videoElement);\n            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n              const constraints = {\n                video: {\n                  width: {\n                    ideal: options.width\n                  },\n                  height: {\n                    ideal: options.height\n                  }\n                }\n              };\n              if (options.position === 'rear') {\n                constraints.video.facingMode = 'environment';\n                _this.isBackCamera = true;\n              } else {\n                _this.isBackCamera = false;\n              }\n              navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                //video.src = window.URL.createObjectURL(stream);\n                videoElement.srcObject = stream;\n                videoElement.play();\n                resolve({});\n              }, err => {\n                reject(err);\n              });\n            }\n          } else {\n            reject({\n              message: 'camera already started'\n            });\n          }\n        });\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n  stop() {\n    return _asyncToGenerator(function* () {\n      const video = document.getElementById('video');\n      if (video) {\n        video.pause();\n        const st = video.srcObject;\n        const tracks = st.getTracks();\n        for (var i = 0; i < tracks.length; i++) {\n          var track = tracks[i];\n          track.stop();\n        }\n        video.remove();\n      }\n    })();\n  }\n  capture(options) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      return new Promise((resolve, _) => {\n        const video = document.getElementById('video');\n        const canvas = document.createElement('canvas');\n        // video.width = video.offsetWidth;\n        const context = canvas.getContext('2d');\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        // flip horizontally back camera isn't used\n        if (!_this2.isBackCamera) {\n          context.translate(video.videoWidth, 0);\n          context.scale(-1, 1);\n        }\n        context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n        let base64EncodedImage;\n        if (options.quality != undefined) {\n          base64EncodedImage = canvas.toDataURL('image/jpeg', options.quality / 100.0).replace('data:image/jpeg;base64,', '');\n        } else {\n          base64EncodedImage = canvas.toDataURL('image/png').replace('data:image/png;base64,', '');\n        }\n        resolve({\n          value: base64EncodedImage\n        });\n      });\n    })();\n  }\n  captureSample(_options) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      return _this3.capture(_options);\n    })();\n  }\n  getSupportedFlashModes() {\n    return _asyncToGenerator(function* () {\n      throw new Error('getSupportedFlashModes not supported under the web platform');\n    })();\n  }\n  setFlashMode(_options) {\n    return _asyncToGenerator(function* () {\n      throw new Error('setFlashMode not supported under the web platform');\n    })();\n  }\n  flip() {\n    return _asyncToGenerator(function* () {\n      throw new Error('flip not supported under the web platform');\n    })();\n  }\n  setOpacity(_options) {\n    return _asyncToGenerator(function* () {\n      const video = document.getElementById('video');\n      if (!!video && !!_options['opacity']) {\n        video.style.setProperty('opacity', _options['opacity'].toString());\n      }\n    })();\n  }\n}\nconst CameraPreview = new CameraPreviewWeb();\nexport { CameraPreview };\nimport { registerWebPlugin } from '@capacitor/core';\nregisterWebPlugin(CameraPreview);","map":{"version":3,"names":["WebPlugin","CameraPreviewWeb","constructor","name","platforms","start","options","Promise","resolve","reject","navigator","mediaDevices","getUserMedia","audio","disableAudio","video","then","stream","getTracks","forEach","track","stop","catch","error","document","getElementById","parent","videoElement","createElement","id","setAttribute","className","position","userAgent","toLowerCase","isSafari","includes","appendChild","constraints","width","ideal","height","facingMode","isBackCamera","srcObject","play","err","message","pause","st","tracks","i","length","remove","capture","_","canvas","context","getContext","videoWidth","videoHeight","translate","scale","drawImage","base64EncodedImage","quality","undefined","toDataURL","replace","value","captureSample","_options","getSupportedFlashModes","Error","setFlashMode","flip","setOpacity","style","setProperty","toString","CameraPreview","registerWebPlugin"],"sources":["F:/Research-Flutter-ionic/ionic_test_app/testapp/node_modules/@capacitor-community/camera-preview/dist/esm/web.js"],"sourcesContent":["import { WebPlugin } from '@capacitor/core';\nexport class CameraPreviewWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: 'CameraPreview',\n            platforms: ['web'],\n        });\n    }\n    async start(options) {\n        return new Promise(async (resolve, reject) => {\n            await navigator.mediaDevices\n                .getUserMedia({\n                audio: !options.disableAudio,\n                video: true\n            })\n                .then((stream) => {\n                // Stop any existing stream so we can request media with different constraints based on user input\n                stream.getTracks().forEach((track) => track.stop());\n            })\n                .catch((error) => {\n                reject(error);\n            });\n            const video = document.getElementById('video');\n            const parent = document.getElementById(options.parent);\n            if (!video) {\n                const videoElement = document.createElement('video');\n                videoElement.id = 'video';\n                videoElement.setAttribute('class', options.className || '');\n                // Don't flip video feed if camera is rear facing\n                if (options.position !== 'rear') {\n                    videoElement.setAttribute('style', '-webkit-transform: scaleX(-1); transform: scaleX(-1);');\n                }\n                const userAgent = navigator.userAgent.toLowerCase();\n                const isSafari = userAgent.includes('safari') && !userAgent.includes('chrome');\n                // Safari on iOS needs to have the autoplay, muted and playsinline attributes set for video.play() to be successful\n                // Without these attributes videoElement.play() will throw a NotAllowedError\n                // https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari\n                if (isSafari) {\n                    videoElement.setAttribute('autoplay', 'true');\n                    videoElement.setAttribute('muted', 'true');\n                    videoElement.setAttribute('playsinline', 'true');\n                }\n                parent.appendChild(videoElement);\n                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n                    const constraints = {\n                        video: {\n                            width: { ideal: options.width },\n                            height: { ideal: options.height }\n                        }\n                    };\n                    if (options.position === 'rear') {\n                        constraints.video.facingMode = 'environment';\n                        this.isBackCamera = true;\n                    }\n                    else {\n                        this.isBackCamera = false;\n                    }\n                    navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                        //video.src = window.URL.createObjectURL(stream);\n                        videoElement.srcObject = stream;\n                        videoElement.play();\n                        resolve({});\n                    }, (err) => {\n                        reject(err);\n                    });\n                }\n            }\n            else {\n                reject({ message: 'camera already started' });\n            }\n        });\n    }\n    async stop() {\n        const video = document.getElementById('video');\n        if (video) {\n            video.pause();\n            const st = video.srcObject;\n            const tracks = st.getTracks();\n            for (var i = 0; i < tracks.length; i++) {\n                var track = tracks[i];\n                track.stop();\n            }\n            video.remove();\n        }\n    }\n    async capture(options) {\n        return new Promise((resolve, _) => {\n            const video = document.getElementById('video');\n            const canvas = document.createElement('canvas');\n            // video.width = video.offsetWidth;\n            const context = canvas.getContext('2d');\n            canvas.width = video.videoWidth;\n            canvas.height = video.videoHeight;\n            // flip horizontally back camera isn't used\n            if (!this.isBackCamera) {\n                context.translate(video.videoWidth, 0);\n                context.scale(-1, 1);\n            }\n            context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n            let base64EncodedImage;\n            if (options.quality != undefined) {\n                base64EncodedImage = canvas.toDataURL('image/jpeg', options.quality / 100.0).replace('data:image/jpeg;base64,', '');\n            }\n            else {\n                base64EncodedImage = canvas.toDataURL('image/png').replace('data:image/png;base64,', '');\n            }\n            resolve({\n                value: base64EncodedImage,\n            });\n        });\n    }\n    async captureSample(_options) {\n        return this.capture(_options);\n    }\n    async getSupportedFlashModes() {\n        throw new Error('getSupportedFlashModes not supported under the web platform');\n    }\n    async setFlashMode(_options) {\n        throw new Error('setFlashMode not supported under the web platform');\n    }\n    async flip() {\n        throw new Error('flip not supported under the web platform');\n    }\n    async setOpacity(_options) {\n        const video = document.getElementById('video');\n        if (!!video && !!_options['opacity']) {\n            video.style.setProperty('opacity', _options['opacity'].toString());\n        }\n    }\n}\nconst CameraPreview = new CameraPreviewWeb();\nexport { CameraPreview };\nimport { registerWebPlugin } from '@capacitor/core';\nregisterWebPlugin(CameraPreview);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}